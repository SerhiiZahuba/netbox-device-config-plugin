{% extends 'base.html' %}
{% block content %}
<h3>Історія конфігів: {{ device.name }}</h3>
<table class="table table-sm table-hover mt-3">
    <thead>
    <tr><th>Дата</th><th>Дії</th></tr>
    </thead>
    <tbody>
    {% for conf in history %}
    <tr>
        <td>{{ conf.created_at }}</td>
        <td>
            <button class="btn btn-sm btn-outline-secondary" onclick="toggle('conf{{ forloop.counter }}')">Show</button>
        </td>
    </tr>
    <tr id="conf{{ forloop.counter }}" style="display:none;">
        <td colspan="2"><pre style="background:#f8f9fa;">{{ conf.config }}</pre></td>
    </tr>
    {% empty %}
    <tr><td colspan="2">Немає записів.</td></tr>
    {% endfor %}
    </tbody>
</table>

<script>
    function toggle(id) {
        const el = document.getElementById(id);
        el.style.display = el.style.display === 'none' ? '' : 'none';
    }
</script>
{% endblock %}
