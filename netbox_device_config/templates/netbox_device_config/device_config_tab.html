{% extends 'generic/object.html' %}
{% load helpers i18n %}

{% block content %}
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">{% trans "Config Backups" %}</h5>
        <a href="{% url 'plugins:netbox_device_config:devicecredential_list' %}" class="btn btn-sm btn-primary">
            {% trans "Manage Credentials" %}
        </a>
        <a href="{% url 'plugins:netbox_device_config:backup_device' object.id %}" class="btn btn-sm btn-success">
            {% trans "Backup now" %}
        </a>

    </div>

    <div class="table-responsive">
        <table class="table table-hover table-sm mb-0">
            <thead>
            <tr>
                <th>{% trans "Created" %}</th>
                <th>{% trans "Size" %}</th>
                <th>{% trans "Actions" %}</th>
            </tr>
            </thead>
            <tbody>
            {% for h in history %}
            <tr>
                <td>{{ h.created_at|date:"Y-m-d H:i" }}</td>
                <td>{{ h.config|length|filesizeformat }}</td>
                <td>
                    <a href="{% url 'plugins:netbox_device_config:view_config' h.id %}" class="btn btn-xs btn-outline-primary">{% trans "View" %}</a>
                    <a href="{% url 'plugins:netbox_device_config:compare_config' h.id %}" class="btn btn-xs btn-outline-info">{% trans "Diff" %}</a>
                    <a href="{% url 'plugins:netbox_device_config:download_config' h.id %}" class="btn btn-xs btn-outline-success">{% trans "Download" %}</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="3" class="text-muted text-center">{% trans "No backups found" %}</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
